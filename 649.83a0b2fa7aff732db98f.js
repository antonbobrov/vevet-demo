"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[649],{649:function(e,t,s){var i=s(680),r=s(32);function n(e,t){if(e instanceof NodeList)return e;if((0,i.v)(e))return[e];if(Array.isArray(e))return e;if(void 0!==t){const s=(0,r.J)(t);if(s)return s.querySelectorAll(e)}return document.querySelectorAll(e)}var o=s(617),a=s(122),d=s(569);function u(e,t=[0,1]){return e<t[0]?t[0]:e>t[1]?t[1]:e}function c(e,t,s){return((h(t,s)*e+l(t,s))*e+p(t))*e}function h(e,t){return 1-3*t+3*e}function l(e,t){return 3*t-6*e}function p(e){return 3*e}function f(e,t,s){return 3*h(t,s)*e*e+2*l(t,s)*e+p(t)}var _=s(705);const g=(e,t)=>{var s,i;return void 0===t&&(t=null!==(i=null===(s=(0,_.S)())||void 0===s?void 0:s.props.easing)&&void 0!==i&&i),function(e,t=!1){return Array.isArray(t)?function(e,t){const[s,i,r,n]=t;if(s===i&&r===n)return e;const o=[];for(let e=0;e<11;++e)o[e]=c(.1*e,s,r);return 0===e?0:1===e?1:c(function(e,t,s){const i=e[0],r=e[2];let n=0,o=1;for(;10!==o&&s[o]<=t;++o)n+=.1;--o;const a=n+(t-s[o])/(s[o+1]-s[o])*.1,d=f(a,i,r);return d>=.001?function(e,t,s,i){for(let r=0;r<4;++r){const r=f(t,s,i);if(0===r)return t;t-=(c(t,s,i)-e)/r}return t}(t,a,i,r):0===d?a:function(e,t,s,i,r){let n,o,a=0;do{o=t+(s-t)/2,n=c(o,i,r)-e,n>0?s=o:t=o}while(Math.abs(n)>1e-7&&++a<10);return o}(t,n,n+.1,i,r)}(t,e,o),i,n)}(e,t):"function"==typeof t?t(e):e}(e,t)};var m=s(201);class y extends m.u{_getDefaultProps(){return Object.assign(Object.assign({},super._getDefaultProps()),{easing:(0,_.S)().props.easing,isDestroyedOnEnd:!1,duration:1e3})}get p(){return this._p}set p(e){this._p=e,this._handleProgressUpdate()}get e(){return this._e}get isPlaying(){return void 0!==this._raf}get isReversed(){return this._isReversed}get isPaused(){return this._isPaused}get duration(){return Math.max(this.props.duration,1)}constructor(e,t=!0){super(e,!1),this._p=0,this._e=0,this._raf=void 0,this._rafTime=0,this._isReversed=!1,this._isPaused=!1,t&&this.init()}play(){this.isDestroyed||1===this.p||(this._isReversed=!1,this._isPaused=!1,this.isPlaying||(this._rafTime=Date.now(),this._animate()))}reverse(){this.isDestroyed||0===this.p||(this._isReversed=!0,this._isPaused=!1,this.isPlaying||(this._rafTime=Date.now(),this._animate()))}pause(){this.isDestroyed||(this._isPaused=!0,this._raf&&window.cancelAnimationFrame(this._raf),this._raf=void 0)}reset(){this.isDestroyed||(this.pause(),this.p=0)}_animate(){if(this.isPaused)return;const{isReversed:e}=this,t=Date.now(),s=Math.abs(this._rafTime-t);this._rafTime=t;const i=s/this.duration/(e?-1:1),r=u(this.p+i,[0,1]);if(this.p=r,1===r&&!e||0===r&&e)return this._isReversed=!1,this._isPaused=!1,void(this._raf=void 0);this._raf=window.requestAnimationFrame(this._animate.bind(this))}_handleProgressUpdate(){this._e=g(this._p,this.props.easing),this.callbacks.tbt("progress",{p:this._p,e:this._e}),0!==this.p?1===this.p&&(this.callbacks.tbt("end",void 0),this.props.isDestroyedOnEnd&&this.destroy()):this.callbacks.tbt("start",void 0)}_destroy(){this.pause(),super._destroy()}}function v(e,t){return new Promise((s=>{const{targetProgress:i}=e,r=function({element:e,targetProgress:t}){if(void 0!==e.isComplete)return"boolean"==typeof e.isComplete&&e.isComplete?t:"number"==typeof e.isComplete?e.isComplete:0;if(void 0!==e.isLoaded){if("boolean"==typeof e.isLoaded&&e.isLoaded)return t;if("number"==typeof e.isLoaded)return e.isLoaded}const s=e.getAttribute("data-is-loaded");if(null!==s&&""!==s&&"false"!==s){const e=parseFloat(s);return Number.isNaN(e)?t:e}return 0}(e);r>=i?s():setTimeout((()=>{t.isDestroyed||v(e,t).then((()=>s())).catch((()=>{}))}),50)}))}class b extends d.Z{_getDefaultProps(){return Object.assign(Object.assign({},super._getDefaultProps()),{resourcesQuantity:0,canPreloadImages:!0,canPreloadVideos:!1,preloadCustomSelector:".js-preload",preloadIgnoreClassName:"js-preload-ignore",lerp:.1,forceEnd:500})}get images(){return this._images}get videos(){return this._videos}get customResources(){return this._customResources}get resourcesQuantity(){return this._resourcesQuantity+this.props.resourcesQuantity+this.images.length+this.videos.length+this.customResources.length+1}get loadedResourcesQuantity(){return u(this._loadedResourcesQuantity,[0,this.resourcesQuantity])}get loadProgress(){return this.loadedResourcesQuantity/this.resourcesQuantity}get progress(){return this._progress}set progress(e){this._progress=e,this._handleProgressChange()}constructor(e,t=!0){super(e,!1),this._images=[],this._videos=[],this._customResources=[],this._resourcesQuantity=0,this._loadedResourcesQuantity=0,this._progress=0,t&&this.init()}_init(){this._getResources(),super._init()}_setEvents(){super._setEvents();const{lerp:e}=this.props;"number"==typeof e&&e<1&&(this._raf=new a.K,this._raf.addCallback("frame",(()=>{this.progress=function(e,t,s,i=.001){const r=e*(1-s)+t*s;return Math.abs(t-r)<=i?t:r}(this.progress,this.loadProgress,e)})),this._raf.play()),(0,_.S)().onPageLoad().then((()=>this._handleLoadedResource({isSuccess:!0}))).catch((()=>{})),this._preloadResources()}_getResources(){const{canPreloadImages:e,canPreloadVideos:t,preloadCustomSelector:s,preloadIgnoreClassName:i}=this.props;e&&n("img").forEach((e=>{!e.classList.contains(i)&&"lazy"!==e.loading&&this._images.push(e)})),t&&n("video").forEach((e=>{e.classList.contains(i)||this._videos.push(e)})),s&&Array.from(n(s)).forEach((e=>{if(e.classList.contains(i))return;let t=parseInt(e.getAttribute("data-load-count")||"1",10);t=Number.isNaN(t)?1:u(t,[1,1/0]);for(let s=1;s<=t;s+=1){const i=s/t;this._customResources.push({element:e,targetProgress:i})}}))}_onLoaded(){return new o.A((e=>{let t=!1;this.callbacks.add("progress",(s=>{s.progress>=1&&!t&&(t=!0,e())}),{isProtected:!0,name:this.name})}))}_preloadResources(){this.images.forEach((e=>function(e,t){if(e.complete)return void t(!0);const s=new Image;s.addEventListener("load",(()=>t(!0))),s.addEventListener("error",(()=>t(!1))),s.crossOrigin="anonymous",s.src=e.currentSrc||e.src}(e,(t=>this._handleLoadedResource({element:e,isSuccess:t}))))),this.videos.forEach((e=>function(e,t){e.readyState>0?t(!0):"none"!==e.preload?(e.addEventListener("error",(()=>t(!1))),e.addEventListener("loadedmetadata",(()=>t(!0)))):t(!1)}(e,(t=>this._handleLoadedResource({element:e,isSuccess:t}))))),this._customResources.forEach((e=>{v(e,this).then((()=>this._handleLoadedResource({element:e.element,isSuccess:!0}))).catch((()=>{}))}))}_handleLoadedResource({element:e,isSuccess:t}){this.loadProgress>=1||(this._loadedResourcesQuantity+=1,this.callbacks.tbt("resourceLoad",{element:e,atProgress:this.progress,loadProgress:this.loadProgress,isSuccess:t}),this._raf||(this.progress=this.loadProgress))}iterateLoadedResources(e=1){const t=Math.abs(e);for(let e=0;e<t;e+=1)this._handleLoadedResource({isSuccess:!0})}iterateResourcesQuantity(e=1){this._resourcesQuantity+=e}_handleProgressChange(){if(this.callbacks.tbt("progress",{progress:this.progress,loadProgress:this.loadProgress}),this.progress>=1)this._raf&&(this._raf.destroy(),this._raf=void 0);else if("number"==typeof this.props.forceEnd&&this.loadProgress>=1&&!this._endTimeline){this._raf&&(this._raf.destroy(),this._raf=void 0),this._endTimeline=new y({duration:this.props.forceEnd});const e=this.progress;this._endTimeline.addCallback("progress",(({p:t})=>{const s=1-e;this.progress=e+s*t})),this._endTimeline.play()}}_destroy(){var e,t;super._destroy(),null===(e=this._raf)||void 0===e||e.destroy(),null===(t=this._endTimeline)||void 0===t||t.destroy()}}var P=document.getElementById("v-preloader"),L=document.getElementById("percent"),R=document.getElementById("v-preloader-hide"),E=new b({container:P});console.log(E.images,E.videos,E.customResources),E.addCallback("progress",(function(){L.textContent="".concat((100*E.progress).toFixed(0),"%")})),E.addCallback("hidden",(function(){return E.destroy()})),R&&(E.changeProps({hideAnimation:!1}),E.addCallback("loaded",(function(){R.removeAttribute("disabled")})),R.addEventListener("click",(function(){return E.hide()})));var A=document.querySelector(".js-preload");A&&A.addEventListener("click",(function(){var e;if(A.getAttribute("data-load-count")){var t=Number(null!==(e=A.getAttribute("data-is-loaded"))&&void 0!==e?e:0);A.setAttribute("data-is-loaded","".concat(t+.25))}else A.setAttribute("data-is-loaded","1")}))},680:function(e,t,s){function i(e){return e instanceof HTMLElement||e instanceof Element}s.d(t,{v:function(){return i}})},810:function(e,t,s){function i(e){return e instanceof Window}s.d(t,{l:function(){return i}})},32:function(e,t,s){s.d(t,{J:function(){return n}});var i=s(680),r=s(810);function n(e,t){if((0,r.l)(e))return e;if((0,i.v)(e))return e;if(void 0!==t){const s=n(t);if(s)return s.querySelector(e)}return document.querySelector(e)}},569:function(e,t,s){s.d(t,{Z:function(){return d}});var i=s(32),r=s(617),n=s(201),o=s(60),a=s(705);class d extends n.u{_getDefaultProps(){return Object.assign(Object.assign({},super._getDefaultProps()),{container:`#${this.prefix}`,hideAnimation:250})}get prefix(){return`${(0,a.S)().prefix}preloader`}get container(){return this._container}get isHidden(){return this._isHidden}constructor(e,t=!0){if(super(e,!1),this.props.container){const e=(0,i.J)(this.props.container);e instanceof HTMLElement&&(this._container=e,this.toggleClassName(e,this.className(""),!0))}this._isToBeHidden=!1,this._isHidden=!1,t&&this.init()}_init(){super._init(),this._setEvents()}_setEvents(){const e=this._onLoaded();e.then((()=>{this.isDestroyed||this._handleLoaded()})).catch((()=>{})),this.addDestroyableAction((()=>e.cancel()))}_onLoaded(){return(0,a.S)().onPageLoad()}_handleLoaded(){this.callbacks.tbt("loaded",void 0),"boolean"!=typeof this.props.hideAnimation&&this.hide()}hide(e=("boolean"!=typeof this.props.hideAnimation?this.props.hideAnimation:250)){return this._isToBeHidden=!0,this.callbacks.tbt("hide",void 0),new r.A((t=>{const s=this._container;if(!s)return this._handleHidden(),void t();s.style.transition=`opacity ${e}ms, visibility ${e}ms`,s.style.opacity="0",s.style.visibility="hidden";const i=(0,o.y)((()=>{s.style.display="none",this._handleHidden(),t()}),e);this.addDestroyableAction((()=>i.clear()))}))}_handleHidden(){this._isHidden=!0,this.callbacks.tbt("hidden",void 0)}onHide(e){if(!this._isToBeHidden)return this.addCallback("hide",(()=>e()));e()}onHidden(e){if(!this._isHidden)return this.addCallback("hidden",(()=>e()));e()}}}}]);